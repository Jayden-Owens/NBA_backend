{"version":3,"names":["_express","require","_bcryptjs","_interopRequireDefault","_jsonwebtoken","_user","_chargebee","e","__esModule","default","router","Router","post","req","res","name","email","password","body","existingUser","User","findOne","status","json","success","message","hashedPassword","bcrypt","hash","newUser","trialStartDate","Date","user","save","token","jwt","sign","id","_id","process","env","JWT_SECRET","expiresIn","isTrialExpired","err","console","error","isMatch","compare","customerResponse","chargebee","customer","list","request","customerId","ssoResponse","length","portal_session","create","portalUrl","access_url","delete","userId","findById","findByIdAndDelete","_default","exports"],"sources":["user.js"],"mappings":"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","ignoreList":[]}